<!DOCTYPE html>
<html>
    <head>
        <title>wallpaper-gen</title>
        <script src="https://kit.fontawesome.com/97e00ab055.js" crossorigin="anonymous"></script>
        <script src="http://hongru.github.io/proj/canvas2image/canvas2image.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <link href='https://fonts.googleapis.com/css?family=Abel' rel='stylesheet'>
        <link href="https://fonts.googleapis.com/css?family=Teko|Roboto|Source+Code+Pro" rel="stylesheet" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    </head>
    <style>
html, body {
    margin: 0;
    height: 100%;
    font-family: 'Abel';
}
p {
    margin-top: 0;
}
ol {
    padding-inline-start: 10px;
}
ol li{
    list-style-type: none;
}
#sizeForm {
    background-color: rgba(255, 255, 255, 0.75);
    border-radius: 25px;
    text-align: center;
    width: 50%;
    position: absolute;
    top: 50%;
    left: 50%;
    margin-top: -25%;
    margin-left: -25%;
}
.main {
    background-color: #495057;
    height:100%;
    width: 85%;
    float:right;
    animation-timing-function: linear;
    -webkit-animation-timing-function: linear;
    -webkit-animation: contact_shrink 1s;
    animation: contact_shrink 1s;
    overflow:auto;
}
.navbar {
    float: left;
    height: 100%;
    width: 15%;
    background-color: #c70082;
    color: #FFF;
    animation-timing-function: linear;
    -webkit-animation-timing-function: linear;
    -webkit-animation: nav_show 1s;
    animation: nav_show 1s;
}
#canvaContainer {
    padding: 10px 10px 10px 10px;
}
#myCanvas {
}
div.hidden {
    visibility: hidden;
}
div.hide {
    visibility: hidden;
}
.input_num {
    width: 50px;
}
i {
}
i.selected {
    color: #c70082;
}
#buttons {
    display: flex;
    margin: 0 auto;
        width: 100px;
}
.button {
    flex-basis: 50%;
}
table {
    margin: 0 auto;
}
#botom_file_list {
    overflow-x: scroll;
    width: 100%;
    height: 10%;
    position: fixed;
    bottom: 0px;
    background-color: rgba(26, 250, 253, 0.49);
}
#file_list{
    display: table;
    vertical-align: middle;
    padding-inline-start: 0px;
}
ul li{
    display: inline;
    padding-left: 10px;
    padding-right: 10px;
    font-size: 200%;
}
h3 {
    margin-top: 10px;
    margin-bottom: 5px;
    font-family: 'Roboto';
}
a, a:visited, a:link, a:active {
    text-decoration: none;
    color: #FFF;
}
/* ------ ICON ANIMATION -------------- */
#icn {
    float:left;
    position: absolute;
    background-color:rgb(255,255,255,0);
    padding: 5px 5px 0px 5px;
}
.container {
    display: inline-block;
    cursor: pointer;
}

.bar1, .bar2, .bar3 {
    width: 35px;
    height: 5px;
    background-color: black;
    margin: 6px 0;
    transition: 0.4s;
}

.change .bar1 {
    -webkit-transform: rotate(-45deg) translate(-9px, 6px) ;
    transform: rotate(-45deg) translate(-9px, 6px) ;
}

.change .bar2 {opacity: 0;}

.change .bar3 {
    -webkit-transform: rotate(45deg) translate(-8px, -8px) ;
    transform: rotate(45deg) translate(-8px, -8px) ;
}
/* -------- ANIMATION NAVBAR ------*/
.move_nav {
    -webkit-animation-timing-function: linear;
    -webkit-animation: nav_hide 1s;
    animation: nav_hide 1s;
    width: 0%;
}

@-webkit-keyframes nav_show {
    from {width: 0%;}
    to {width: 15%;}
}
@keyframes nav_show {
    from {width: 0%;}
    to {width: 15%;}
}

@-webkit-keyframes nav_hide {
    from {width: 15%;}
    to {width: 0%;}
}
@keyframes nav_hide {
    from {width: 15%;}
    to {width: 0%;}
}

/* ----- ANIMATION CONTENT --------*/
.move_content {
    -webkit-animation-timing-function: linear;
    -webkit-animation: contact_display 1s;
    animation: contact_display 1s;
    width: 100%;
}
@-webkit-keyframes contact_shrink {
    from {width: 100%;}
    to {width: 85%;}
}
@keyframes contact_shrink {
    from {width: 100%;}
    to {width: 85%;}
}

@-webkit-keyframes contact_display {
    from {width: 85%;}
    to {width: 100%;}
}
@keyframes contact_dispaly {
    from {width: 85%;}
    to {width: 100%;}
}
.fa, .fas {
    font-weight: 900;
    font-size: 30px;
}

#padding {
    margin-right: 30px;
}
    </style>
    <body>
        <div class="navbar">
            <ol>
                <li><h2>WALLPAPER-GEN</h2></li>
                <li>Wallpaper generator project based on a pyton script I made to generate wallpapers from different sized album covers.</li>
                <li><h3>Usage:</h3></li>
                <li>Depending on your device click the Icon, set your screen size. Then feed it the different files needed. You can inspect wich file you added by looking at the bottom pannel. For manual size setting use the desktop icon.</li>
                <li><h3>Links:</h3></li>
                <li><span id="padding"></span><a href="https://gist.github.com/p4p1/155e2515dd82d662421a6a31388322bf"><i class="fa fab fa-github-alt"></i></a><span id="padding"></span><a href="index.html"><i class="fas fa-at"></i></a></li>
            </ol>
        </div>
        <div class="main">
            <div id="icn">
                <div class="container change" onclick="myFunction(this)">
                    <div class="bar1"></div>
                    <div class="bar2"></div>
                    <div class="bar3"></div>
                </div>
            </div>
            <div id="sizeForm">
                <h1></h1>
                <div id="buttons">
                    <div class="button">
                        <i id="screenBtn" class="fas fa-tv selected"></i>
                    </div>
                    <div class="button">
                        <i id="mobileButn" class="fas fa-mobile-alt"></i>
                    </div>
                </div>
                <div id="computer_size">
                    <table>
                        <tr>
                            <th>height</th>
                            <th>x</th>
                            <th>width</th>
                        </tr>
                        <tr>
                            <th><input class="input_num" type="number" id="input_height" min="0" /></th>
                            <th>x</th>
                            <th><input class="input_num" type="number" id="input_width" min="0" /></th>
                            <th><input type="button" value="OK" onclick="validate_num()" /></th>
                        </tr>
                    </table>
                </div>
                <div id="phone_size" class="hide">
                    <select id="ph_size">
                        <option value="galaxy_s5">Galaxy S5</option>
                        <option value="pixel2">Pixel2</option>
                        <option value="pixel2xl">Pixel2 XL</option>
                        <option value="iphone5">Iphone 5/SE</option>
                        <option value="ipad">iPad</option>
                   </select>
                    <input type="button" value="OK" onclick="validate_num_phone()" />
                </div>
                <div id="canvaContainer" class="hidden">
                    <input type="file" id="inp">
                    <input type="button" value="generate" onclick="generate()">
                </div>
            </div>
            <div id="botom_file_list">
                <ul id="file_list">
                </ul>
            </div>
            <canvas id="myCanvas">
                your browser does not support HTML5 canvas!
            </canvas>
        </div>
    </body>
    <script>
        var height = 0;
        var width = 0;
        var imgNum = 0;
        var size = 0;
        var images = [];
        var canvas = document.getElementById('myCanvas');
        var ctx = canvas.getContext('2d');


        function validate_num() {
            height = document.getElementById("input_height").value;
            width = document.getElementById("input_width").value;
            document.getElementById("canvaContainer").classList.remove('hidden');
            document.getElementById("myCanvas").style.width = width+"px";
            document.getElementById("myCanvas").style.height= height+"px";
            canvas.width = width;
            canvas.height = height;
        }
        function validate_num_phone() {
            var val = $("#ph_size").val();
            if (val === "galaxy_s5") {
                width = 360;
                height = 640;
            } else if (val === "pixel2") {
                width = 411;
                height = 731;
            } else if (val === "pixel2xl") {
                width = 411;
                height = 823;
            } else if (val === "iphone5") {
                width = 320;
                height = 568;
            } else if (val === "ipad") {
                width = 768;
                height = 1029;
            }
            document.getElementById("canvaContainer").classList.remove('hidden');
            document.getElementById("myCanvas").style.width = width+"px";
            document.getElementById("myCanvas").style.height= height+"px";
            canvas.width = width;
            canvas.height = height;
        }

        document.getElementById('inp').onchange = function(e) {
              var img = new Image();
              img.onerror = failed;
              img.src = URL.createObjectURL(this.files[0]);
              imgNum++;
              size = Math.sqrt((width*height) / imgNum);

              var file_list = document.getElementById("file_list");
              file_list.innerHTML += "<li>"+this.files[0].name+"</li>";
              images.push(img);
        };
        function generate() {
            var inc = 0;
            for (var i = 0; i < height; i+=size) {
                for (var j = 0; j < width - 50; j+=size) {
                    ctx.drawImage(images[inc], 0,0, images[inc].width, images[inc].height,
                        j, i, size, size);
                    inc++;
                }
            }
            Canvas2Image.saveAsPNG(canvas);
        }
        function failed() {
              console.error("The provided file couldn't be loaded as an Image media");
        }
        document.getElementById("screenBtn").onclick = function() {
            document.getElementById("computer_size").classList.remove("hide");
            document.getElementById("mobileButn").classList.remove("selected");
            document.getElementById("screenBtn").classList.add("selected");
            document.getElementById("phone_size").classList.add("hide");
        }
        document.getElementById("mobileButn").onclick = function() {
            document.getElementById("computer_size").classList.add("hide");
            document.getElementById("mobileButn").classList.add("selected");
            document.getElementById("screenBtn").classList.remove("selected");
            document.getElementById("phone_size").classList.remove("hide");
        }
        function myFunction(x) {
                x.classList.toggle("change");
                $(document).ready(function(){
                    $(".main").toggleClass("move_content");
                    $(".navbar").toggleClass("move_nav");
                });
        }
    </script>
</html>
